<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reviews | TheKrochet</title>
<link rel="stylesheet" href="layout.css">
<link rel="stylesheet" href="responsive.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
</head>
<body>

<nav data-aos="fade-down">
  <div class="nav-top">
      <h2>TheKrochet</h2>
      <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
  </div>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="products.html">Products</a>
    <a href="reviews.html" class="active">Reviews</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </div>
</nav>

<header class="page-header" data-aos="fade-up">
  <h1>Customer Reviews</h1>
  <p>Real words from happy customers ğŸ’›</p>
</header>

<section style="padding: 40px 20px; max-width: 1000px; margin: auto;">
  <div style="text-align:center; margin-bottom:30px;">
    <button class="btn-primary" onclick="toggleForm()" data-aos="zoom-in">â• Add Your Review</button>
  </div>

  <div id="reviewForm" class="card" style="display:none; max-width:500px; margin:0 auto 40px;">
    <input id="name" placeholder="Your Name">
    <select id="rating">
      <option value="5">â­â­â­â­â­ (5)</option>
      <option value="4">â­â­â­â­ (4)</option>
      <option value="3">â­â­â­ (3)</option>
    </select>
    <textarea id="reviewText" placeholder="Write your review"></textarea>
    <button class="btn-primary" onclick="addReview()" style="width:100%">Submit</button>
  </div>

  <div class="grid" id="reviewsGrid"></div>
</section>

<footer>Â© 2025 TheKrochet</footer>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script src="main.js"></script>

<script>
const db = firebase.firestore();
const grid = document.getElementById("reviewsGrid");
const form = document.getElementById("reviewForm");

function toggleForm(){
  form.style.display = form.style.display === "block" ? "none" : "block";
}

function addReview(){
  const name = document.getElementById("name").value;
  const rating = Number(document.getElementById("rating").value);
  const text = document.getElementById("reviewText").value;

  if(!name || !text){ alert("Please fill all fields"); return; }

  db.collection("reviews").add({
    name, rating, text,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });

  document.getElementById("name").value = "";
  document.getElementById("reviewText").value = "";
  form.style.display = "none";
}

db.collection("reviews").orderBy("createdAt","desc").onSnapshot(snap => {
  grid.innerHTML = "";
  snap.forEach(doc => {
    const r = doc.data();
    grid.innerHTML += `
      <div class="card" data-aos="fade-up">
        <div style="color:gold; font-size:20px; margin-bottom:10px;">${"â­".repeat(r.rating)}</div>
        <p>${r.text}</p>
        <span style="font-size:13px; color:#999; display:block; margin-top:10px;">â€” ${r.name}</span>
      </div>`;
  });
});
</script>
</body>
</html>

